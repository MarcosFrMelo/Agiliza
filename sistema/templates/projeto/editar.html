{% extends 'base.html' %}
{% load static %}

{% block titulo %}Editar Projeto - Agiliza{% endblock %}

{% block conteudo %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            
            <div class="card shadow border-0 rounded-4">
                <div class="card-header bg-white border-0 pt-4 pb-2 text-center">
                    <h3 class="fw-bold text-primary">Editar Projeto</h3>
                    <p class="text-muted small">Alterar informações do quadro</p>
                </div>

                <div class="card-body p-4">
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}

                        {% for field in form %}
                            <div class="mb-3">
                                {% if field.field.widget.input_type == 'file' %}
                                    <label for="{{ field.id_for_label }}" class="form-label small text-muted ms-1">{{ field.label }}</label>
                                    
                                    {% if field.value %}
                                        <div class="mb-2 small">
                                            Atual: <a href="/media/{{ field.value }}" target="_blank">Ver imagem</a>
                                        </div>
                                    {% endif %}
                                    
                                    <input type="file" name="{{ field.name }}" id="{{ field.id_for_label }}" class="form-control">
                                {% else %}
                                    <div class="form-floating">
                                        <input 
                                            type="{{ field.field.widget.input_type }}" 
                                            name="{{ field.name }}" 
                                            id="{{ field.id_for_label }}"
                                            class="form-control" 
                                            placeholder="{{ field.label }}"
                                            value="{{ field.value|default_if_none:'' }}"
                                        >
                                        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                                    </div>
                                {% endif %}
                                
                                {% for error in field.errors %}
                                    <div class="text-danger small mt-1 ps-1">{{ error }}</div>
                                {% endfor %}
                            </div>
                        {% endfor %}

                        <div class="d-grid gap-2 mt-4">
                            <button type="submit" class="btn btn-primary btn-lg">Salvar Alterações</button>
                            <a href="{% url 'listar-projetos' %}" class="btn btn-light text-muted">Cancelar</a>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}